<!DOCTYPE html>
<html>
<head>
    <title>Discover Puerto Rico</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
   integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
   crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
   integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
   crossorigin=""></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-sidebar-v2@3.2.3/css/leaflet-sidebar.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet-sidebar-v2@3.2.3/js/leaflet-sidebar.min.js"></script>
    <!-- Optional: Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


    <style>
        /* --- Global Styles --- */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; /* Updated font stack */
            background-color: #eef1f5; /* Slightly softer page background */
            color: #333;
            overflow: hidden;
        }

        /* --- Map Container --- */
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1;
        }

        /* --- Sidebar Content Styling (#sidebar div inside the pane) --- */
        #sidebar {
            padding: 20px 25px; /* Adjusted padding */
            background-color: #ffffff;
            color: #333;
            height: 100%;
            overflow-y: auto;
            box-sizing: border-box; /* Important for padding and height */
        }

        #sidebar h1 {
            color: #0062a8; /* Slightly darker, more refined blue */
            font-size: 1.6em; /* Slightly smaller for refinement */
            margin-top: 0;
            margin-bottom: 25px; /* More space below heading */
            padding-bottom: 15px; /* More space for border */
            border-bottom: 1px solid #dfe3e8; /* Softer border */
            font-weight: 600; /* Good weight */
            letter-spacing: 0.5px; /* Slight letter spacing */
        }

        #sidebar ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        #sidebar li {
            margin-bottom: 8px; /* Slightly less margin between items */
        }

        #sidebar li a {
            display: block;
            padding: 14px 20px; /* Increased padding for better touch */
            text-decoration: none;
            color: #3c4858; /* Darker text for better readability */
            border-radius: 5px; /* Softer radius */
            transition: all 0.25s ease-in-out;
            font-weight: 500;
            border-left: 4px solid transparent; /* Active indicator */
            background-color: transparent; /* Make links transparent by default */
        }

        #sidebar li a:hover {
            background-color: #f0f4f8; /* Light hover background */
            color: #0056b3; /* Darker blue on hover */
            transform: translateX(3px); /* More subtle shift */
        }

        #sidebar li a.active {
            background-color: #e6f3ff; /* Light blue background for active */
            color: #0056b3; /* Dark blue text for active */
            border-left: 4px solid #007bff; /* Prominent blue active border */
            font-weight: 600; /* Bolder active link */
        }

        /* --- Info Content Area --- */
        #info-content {
            margin-top: 25px;
            padding: 15px;
            border-top: 1px solid #dfe3e8; /* Separator line */
            font-size: 0.95em;
            line-height: 1.6;
            color: #495057;
        }
        #info-content h3 {
            margin-top: 0;
            color: #0062a8;
            font-size: 1.2em;
        }


        /* === Leaflet Sidebar v2 Plugin Customization === */
        .leaflet-sidebar {
            /* Main sidebar container generated by the plugin */
            background-color: #ffffff; /* Ensure sidebar pane background is white */
            box-shadow: 0 0 15px rgba(0,0,0,0.15); /* Softer, more diffuse shadow */
            /* width: 300px !important; /* Example: If you want to override default width */
        }

        /* Tabs Bar (vertical bar with icons) */
        .leaflet-sidebar-tabs {
            background-color: #f8f9fa; /* Light grey for the tab bar itself */
            /* border-right: 1px solid #dee2e6; /* Subtle border separating tabs from content */
        }
        .leaflet-sidebar-tabs > li { /* Each tab item */
            height: 50px; /* Slightly taller tabs */
            width: 50px;
            background-color: transparent; /* Tab items transparent by default */
        }
        .leaflet-sidebar-tabs > li > a { /* Icon link inside tab */
            font-size: 1.3em; /* Slightly larger icon */
            color: #6c757d; /* Greyish icon color */
            transition: color 0.2s ease;
        }
        .leaflet-sidebar-tabs > li:hover > a {
            color: #007bff; /* Blue icon on hover */
            background-color: #e9ecef; /* Light background on tab hover */
        }
        .leaflet-sidebar-tabs > li.active > a {
            color: #007bff; /* Blue icon for active tab */
            background-color: #ffffff; /* Active tab same as sidebar pane */
        }

        /* Content Pane (where your #sidebar div goes) */
        .leaflet-sidebar-content {
            background-color: #ffffff; /* Ensure content pane is white */
        }

        /* Close Button */
        .leaflet-sidebar .close {
            background-color: transparent; /* Make close button background transparent */
            color: #6c757d; /* Greyish color, similar to tab icons */
            font-size: 1.2em; /* Adjust size if needed */
            transition: color 0.2s ease, background-color 0.2s ease;
            height: 40px; /* Match height to other controls potentially */
            width: 40px;
            line-height: 40px;
            text-align: center;
            border-radius: 4px;
        }
        .leaflet-sidebar .close:hover {
            color: #ffffff; /* White X on hover */
            background-color: #007bff; /* Blue background on hover */
        }

        /* --- Map Controls (Zoom, etc.) --- */
        .leaflet-control-zoom a {
            background-color: #ffffff !important;
            color: #007bff !important;
            border: 1px solid #ced4da !important;
            border-radius: 4px !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .leaflet-control-zoom a:hover {
            background-color: #f8f9fa !important;
        }
        .leaflet-control-attribution {
            background: rgba(255,255,255,0.85) !important;
            padding: 3px 8px !important;
            border-radius: 3px;
            font-size: 0.75em;
        }

    </style>
</head>
<body>

    <div id="sidebar-container" class="leaflet-sidebar collapsed">
        <!-- Nav tabs -->
        <div class="leaflet-sidebar-tabs">
            <ul role="tablist">
                <li><a href="#infoPane" role="tab"><i class="fas fa-bars"></i></a></li> <!-- Changed icon -->
                <!-- Add more tabs here if needed -->
                <!-- Example: <li><a href="#settingsPane" role="tab"><i class="fas fa-cog"></i></a></li> -->
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="leaflet-sidebar-content">
            <div class="leaflet-sidebar-pane" id="infoPane"> <!-- Changed ID to avoid conflict with #sidebar div -->
                <div id="sidebar"> <!-- Your original sidebar content now cleanly styled -->
                    <h1>Explore Puerto Rico</h1>
                    <ul>
                        <li><a href="#" onclick="showInfo('population'); setActive(this); return false;">Population</a></li>
                        <li><a href="#" onclick="showInfo('economy'); setActive(this); return false;">Economy</a></li>
                        <li><a href="#" onclick="showInfo('tourism'); setActive(this); return false;">Tourism</a></li>
                        <li><a href="#" onclick="showInfo('history'); setActive(this); return false;">History & Culture</a></li>
                        <li><a href="#" onclick="showInfo('nature'); setActive(this); return false;">Nature & Outdoors</a></li>
                    </ul>
                    <div id="info-content">
                        Select an item from the menu to learn more about Puerto Rico.
                    </div>
                </div>
            </div>
            <!-- Example for another pane -->
            <!--
            <div class="leaflet-sidebar-pane" id="settingsPane">
                <h1>Settings</h1>
                <p>Configure map settings here...</p>
            </div>
            -->
        </div>
    </div>

    <div id="map"></div>

    <script>
        var map = L.map('map').setView([18.2208, -66.1057], 9);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', { // Switched to a CartoDB Voyager tile
            attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        L.marker([18.2208, -66.1057]).addTo(map)
            .bindPopup('<b>Puerto Rico</b><br>Isla del Encanto.')
            .openPopup();

        var sidebar = L.control.sidebar({
            container: 'sidebar-container',
            closeButton: true,
            position: 'left'
        }).addTo(map);

        // Optional: Open sidebar on load
        // sidebar.open('infoPane');

        var scale = L.control.scale({ imperial: false, metric: true }).addTo(map);

        var currentActiveLink = null;
        function setActive(linkElement) {
            if (currentActiveLink) {
                currentActiveLink.classList.remove('active');
            }
            linkElement.classList.add('active');
            currentActiveLink = linkElement;
        }

        function showInfo(type) {
            var infoContentDiv = document.getElementById('info-content');
            var content = "";
            // Ensure sidebar is open
            sidebar.open('infoPane'); // Make sure to use the correct pane ID

            switch(type) {
                case 'population':
                    content = "<h3>Population Insights</h3><p>Puerto Rico has a population of approximately 3.2 million people. The capital, San Juan, is the most populous city. The culture is a vibrant mix of Taíno, Spanish, and African influences.</p>";
                    break;
                case 'economy':
                    content = "<h3>Economic Landscape</h3><p>Key sectors include manufacturing (especially pharmaceuticals and medical devices), tourism, and services. Efforts are ongoing to diversify and strengthen the economy.</p>";
                    break;
                case 'tourism':
                    content = "<h3>Tourism Highlights</h3><p>Famous for its stunning beaches, historic Old San Juan, El Yunque National Forest (the only tropical rainforest in the U.S. National Forest System), and bioluminescent bays. A major cruise ship destination.</p>";
                    break;
                case 'history':
                    content = "<h3>History & Culture</h3><p>Originally inhabited by the Taíno people, Puerto Rico was claimed by Christopher Columbus for Spain in 1493. It became a U.S. territory in 1898. The island boasts a rich cultural heritage, evident in its music (salsa, bomba, plena), festivals, and art.</p>";
                    break;
        case 'nature':
            content = "<h3>Nature & Outdoors</h3><p>Beyond beaches, explore El Yunque's hiking trails, the Camuy River Cave Park, Toro Negro State Forest, and numerous smaller islands like Culebra and Vieques, known for snorkeling and pristine nature.</p>";
            break;
                default:
                    content = "Select an item from the menu to learn more.";
            }
            infoContentDiv.innerHTML = content;

            // If sidebar isn't open and it's a small screen, maybe focus on the info content.
            // For now, opening is enough.
        }

        // Set initial active link if desired and show default info
        // document.addEventListener('DOMContentLoaded', function() {
        //     const firstLink = document.querySelector('#sidebar ul li a');
        //     if (firstLink) {
        //         firstLink.click(); // Simulate a click to set active and show info
        //     }
        // });

    </script>
</body>
</html>